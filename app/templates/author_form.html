{% extends "base.html" %}

{% block title %}{% if author %}Edit Author{% else %}New Author{% endif %} - Goldco CMS{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="mb-5">
  <h1 class="text-2xl font-semibold text-gray-800 dark:text-neutral-200">
    {% if author %}Edit Author{% else %}Add New Author{% endif %}
  </h1>
  <p class="text-sm text-gray-600 dark:text-neutral-400">
    {% if author %}Update the author details below{% else %}Create a new author entry{% endif %}
  </p>
</div>

<!-- Author Form Card -->
<div class="max-w-2xl">
  <div class="bg-white border border-gray-200 rounded-xl shadow-sm dark:bg-neutral-800 dark:border-neutral-700">
    <div class="p-6 sm:p-8">
      <form method="POST" action="{% if author %}{{ url_for('edit_author', author_id=author.id) }}{% else %}{{ url_for('new_author') }}{% endif %}">

        <!-- Author Name Field -->
        <div class="mb-4">
          <label for="name" class="block text-sm font-medium mb-2 dark:text-white">
            Name <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            id="name"
            name="name"
            value="{% if author %}{{ author.name }}{% endif %}"
            required
            class="py-3 px-4 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
            placeholder="Enter author name"
          >
        </div>

        <!-- Author Description Field -->
        <div class="mb-6">
          <label for="description" class="block text-sm font-medium mb-2 dark:text-white">Description</label>
          <textarea
            id="description"
            name="description"
            rows="4"
            class="py-3 px-4 block w-full border border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600"
            placeholder="Brief description about the author (optional)"
          >{% if author and author.description %}{{ author.description }}{% endif %}</textarea>
          <p class="mt-1 text-xs text-gray-500 dark:text-neutral-500">
            Add a brief bio or description about the author
          </p>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-end gap-x-2">
          <a
            href="{% if author %}{{ url_for('author_profile', author_id=author.id) }}{% else %}{{ url_for('quotes') }}{% endif %}"
            class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none focus:outline-hidden focus:bg-gray-50 dark:bg-transparent dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-800 dark:focus:bg-neutral-800"
          >
            Cancel
          </a>
          <button
            type="submit"
            class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 focus:outline-hidden focus:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none"
          >
            {% if author %}Update Author{% else %}Create Author{% endif %}
          </button>
        </div>

      </form>
    </div>
  </div>

  <!-- Additional Info for Editing -->
  {% if author %}
  <div class="mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4 dark:bg-blue-900/20 dark:border-blue-800">
    <div class="flex">
      <svg class="shrink-0 size-4 text-blue-600 mt-0.5 dark:text-blue-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"/>
        <path d="M12 16v-4"/>
        <path d="M12 8h.01"/>
      </svg>
      <div class="ms-3">
        <h3 class="text-sm font-semibold text-blue-800 dark:text-blue-400">
          Note about author deletion
        </h3>
        <p class="mt-1 text-sm text-blue-700 dark:text-blue-300">
          Authors cannot be deleted if they have associated quotes. To delete this author, you must first remove or reassign all their quotes.
        </p>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
